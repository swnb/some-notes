# nginx

## 网络安全和 ssl 协议

ssl 起源于 netspace ，后面被改成了 tls 协议
tls 协议包含了几个过程

> 该过程位于回话层

4 个过程

- 密钥的交换算法
- 身份验证的算法
- 对称加密算法
- 签名 hash 算法

### 对称加密算法

使用相同的密钥加密和解密

### 非对称加密的算法

两把密钥，一把公钥，一把私钥，公钥加密的只能拿私钥解，私钥加密只能拿公钥解。

### CA 证书的公信力是第三方权威给予的

- DV 证书，域名验证的证书
- OV 证书，基于注册的组织的进行验证
- EV 证书，扩展验证的证书，浏览器显示十分友好

### 证书链

每次验证，服务器发送主证书，然后发送 2 级别证书，根证书的认证都是操作系统或者浏览器自己去验证的，这个过程非常的严谨。

### 通讯的过程

1. Client -> 发送我支持的一些加密套件

2. Server -> 发送我选择的加密套件

> 可以使用 session cache ，在一天内相同客户端不必重复选择加密套件

3. Server -> 发送证书链

> 这个过程伴随椭圆加密算法的参数

4. Server -> 发送上面的数据

5. Client 根据证书的公钥加密随机参数 -> 发送盐

6. Server 解密盐，加密数据，开始握手

大致概括下，tls 首先是握手阶段

- 约定加密方案
- 认证证书
- 使用非对称加密来加密盐
- 对称加密之后所有的数据包
